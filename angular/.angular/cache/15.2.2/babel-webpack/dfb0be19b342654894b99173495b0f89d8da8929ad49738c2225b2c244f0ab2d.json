{"ast":null,"code":"import { CocheModule } from 'src/app/models/coche/coche.module';\n// Importamos el servicio de coches para que se pueda usar en el modelo de html\nimport { CocheService } from '../../services/coche.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/coche.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/common\";\nfunction CochesComponent_tr_104_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\")(6, \"a\", 60);\n    i0.ɵɵlistener(\"click\", function CochesComponent_tr_104_Template_a_click_6_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r16);\n      const coche_r14 = restoredCtx.$implicit;\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.editCoche(coche_r14));\n    });\n    i0.ɵɵelementStart(7, \"i\", 61);\n    i0.ɵɵtext(8, \"edit\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"a\", 60);\n    i0.ɵɵlistener(\"click\", function CochesComponent_tr_104_Template_a_click_9_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r16);\n      const coche_r14 = restoredCtx.$implicit;\n      const ctx_r17 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r17.deleteCoche(coche_r14._id));\n    });\n    i0.ɵɵelementStart(10, \"i\", 61);\n    i0.ɵɵtext(11, \"delete\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const coche_r14 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", coche_r14.marca, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", coche_r14.modelo, \" \");\n  }\n}\n// Decorador de la clase\n// Exportamos la clase y la definimos\nexport class CochesComponent {\n  constructor(cocheService, miFormulario) {\n    this.cocheService = cocheService;\n  }\n  ngOnInit() {\n    console.log(\"iniciado\");\n    this.getCoches();\n    // console.log( this.getCoches());\n  }\n  // // Definimos la funcion que va a manejar el formulario\n  addCoche(form) {\n    if (this.comprobarCoche(this.cocheService.selectedCoche)) {\n      // En caso de que existe el id lo actualizamos\n      if (form.value._id) {\n        console.log(\"Editando coche\");\n        this.cocheService.putCoche(form.value).subscribe(res => {\n          this.resetForm(form);\n          M.toast({\n            html: \"Edit Succesfully\"\n          });\n          this.getCoches();\n        });\n      } else {\n        // En caso de que no exista el id lo eliminamos\n        console.log(form.value);\n        this.cocheService.postCoche(form.value)\n        // Con subscrive obtenemos la respuesta del servidor.\n        .subscribe(res => {\n          console.log(res);\n          this.resetForm(form); // reseteamos el formulario \n          M.toast({\n            html: 'Save Succesfully'\n          });\n          this.getCoches();\n        });\n      }\n    }\n  }\n  getCoches() {\n    this.cocheService.getCoches().subscribe(res => {\n      this.cocheService.coches = res;\n      console.log(res);\n    });\n  }\n  editCoche(coche) {\n    this.cocheService.selectedCoche = coche;\n  }\n  deleteCoche(_id) {\n    if (confirm(\"¿Estas seguro de que quieres eliminarlo?\")) {\n      this.cocheService.deleteCoche(_id).subscribe(res => {\n        console.log(res);\n        this.getCoches();\n      });\n    }\n  }\n  resetForm(form) {\n    if (form) {\n      form.reset();\n      this.cocheService.selectedCoche = new CocheModule();\n    }\n  }\n  comprobarCoche(coche) {\n    const carrocerias = ['Sedán', 'Berlina', 'SUV', 'Coupé', 'Cabrio', 'Familiar', 'Compacto', 'Monovolumen', 'Furgoneta', 'Furgon', 'Autocaravana', 'Pick Up', 'Clasico', 'Super deportivo'];\n    const propulsiones = ['Electrico', 'Diesel', 'Hibrido', 'Hidrogeno'];\n    const tracciones = ['FWD', 'RWD', 'AWD', '4WD', '4x4'];\n    if (carrocerias.includes(coche.carroceria) && propulsiones.includes(coche.propulsion) && tracciones.includes(coche.traccion) && coche.marca != null && coche.marca != \"\") {\n      console.log(\"Parametros bien\");\n      return true;\n    } else {\n      M.toast({\n        html: \"Error faltan valores\"\n      });\n      console.log(\"Faltan datos indispensables\");\n      return false;\n    }\n  }\n}\nCochesComponent.ɵfac = function CochesComponent_Factory(t) {\n  return new (t || CochesComponent)(i0.ɵɵdirectiveInject(i1.CocheService), i0.ɵɵdirectiveInject(i2.FormGroup));\n};\nCochesComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CochesComponent,\n  selectors: [[\"app-coches\"]],\n  features: [i0.ɵɵProvidersFeature([CocheService])],\n  decls: 105,\n  vars: 15,\n  consts: [[1, \"container\"], [1, \"row\"], [1, \"col\", \"s5\"], [1, \"card\"], [1, \"card-content\"], [3, \"formGroup\"], [\"type\", \"hidden\", \"name\", \"_id\", 3, \"ngModel\", \"ngModelChange\"], [\"_id\", \"ngModel\"], [1, \"input-field\", \"col\", \"s12\"], [\"type\", \"text\", \"name\", \"marca\", \"placeholder\", \"Marca\", 3, \"ngModel\", \"ngModelChange\"], [\"marca\", \"ngModel\"], [\"type\", \"text\", \"name\", \"modelo\", \"placeholder\", \"modelo\", 3, \"ngModel\", \"ngModelChange\"], [\"modelo\", \"ngModel\"], [\"type\", \"text\", \"name\", \"color\", \"placeholder\", \"color\", 3, \"ngModel\", \"ngModelChange\"], [\"color\", \"ngModel\"], [\"type\", \"text\", \"name\", \"etiqueta\", \"placeholder\", \"etiqueta\", 3, \"ngModel\", \"ngModelChange\"], [\"etiqueta\", \"ngModel\"], [\"type\", \"number\", \"name\", \"puertas\", \"placeholder\", \"puertas\", 3, \"ngModel\", \"ngModelChange\"], [\"puertas\", \"ngModel\"], [\"type\", \"number\", \"name\", \"cv\", \"placeholder\", \"cv\", 3, \"ngModel\", \"ngModelChange\"], [\"cv\", \"ngModel\"], [\"type\", \"date\", \"name\", \"a_matricula\", \"placeholder\", \"a_matricula\", 3, \"ngModel\", \"ngModelChange\"], [\"a_matricula\", \"ngModel\"], [\"type\", \"number\", \"name\", \"cantidad\", \"placeholder\", \"cantidad\", 3, \"ngModel\", \"ngModelChange\"], [\"cantidad\", \"ngModel\"], [\"type\", \"number\", \"name\", \"precio\", \"placeholder\", \"precio\", 3, \"ngModel\", \"ngModelChange\"], [\"precio\", \"ngModel\"], [\"name\", \"propulsion\", 1, \"browser-default\", 3, \"ngModel\", \"ngModelChange\"], [\"propulsion\", \"ngModel\"], [\"value\", \"Electrico\"], [\"value\", \"Diesel\"], [\"value\", \"Hibrido\"], [\"value\", \"Hidrogeno\"], [\"name\", \"carroceria\", 1, \"browser-default\", 3, \"ngModel\", \"ngModelChange\"], [\"value\", \"Sed\\u00E1n\"], [\"value\", \"Berlina\"], [\"value\", \"SUV\"], [\"value\", \"Coup\\u00E9\"], [\"value\", \"Cabrio\"], [\"value\", \"Familiar\"], [\"value\", \"Compacto\"], [\"value\", \"Monovolumen\"], [\"value\", \"Furgoneta\"], [\"value\", \"Furgon\"], [\"value\", \"Autocaravana\"], [\"value\", \"Pick Up\"], [\"value\", \"Clasico\"], [\"value\", \"Super deportivo\"], [\"name\", \"traccion\", 1, \"browser-default\", 3, \"ngModel\", \"ngModelChange\"], [\"traccion\", \"ngModel\"], [\"value\", \"FWD\"], [\"value\", \"RWD\"], [\"value\", \"AWD\"], [\"value\", \"4WD\"], [\"value\", \"4x4\"], [\"type\", \"text\", \"formControlName\", \"nombre\", \"placeholder\", \"Required\", 1, \"input-field\", \"col\", \"s12\"], [1, \"card-action\"], [1, \"btn\", \"left\"], [1, \"col\", \"s7\"], [4, \"ngFor\", \"ngForOf\"], [1, \"btn\", 3, \"click\"], [1, \"material-icons\"]],\n  template: function CochesComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"form\", 5)(6, \"div\", 1)(7, \"input\", 6, 7);\n      i0.ɵɵlistener(\"ngModelChange\", function CochesComponent_Template_input_ngModelChange_7_listener($event) {\n        return ctx.cocheService.selectedCoche._id = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"div\", 8)(10, \"input\", 9, 10);\n      i0.ɵɵlistener(\"ngModelChange\", function CochesComponent_Template_input_ngModelChange_10_listener($event) {\n        return ctx.cocheService.selectedCoche.marca = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(12, \"div\", 8)(13, \"input\", 11, 12);\n      i0.ɵɵlistener(\"ngModelChange\", function CochesComponent_Template_input_ngModelChange_13_listener($event) {\n        return ctx.cocheService.selectedCoche.modelo = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(15, \"div\", 8)(16, \"input\", 13, 14);\n      i0.ɵɵlistener(\"ngModelChange\", function CochesComponent_Template_input_ngModelChange_16_listener($event) {\n        return ctx.cocheService.selectedCoche.color = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(18, \"div\", 8)(19, \"input\", 15, 16);\n      i0.ɵɵlistener(\"ngModelChange\", function CochesComponent_Template_input_ngModelChange_19_listener($event) {\n        return ctx.cocheService.selectedCoche.etiqueta = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(21, \"div\", 8)(22, \"input\", 17, 18);\n      i0.ɵɵlistener(\"ngModelChange\", function CochesComponent_Template_input_ngModelChange_22_listener($event) {\n        return ctx.cocheService.selectedCoche.puertas = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(24, \"div\", 8)(25, \"input\", 19, 20);\n      i0.ɵɵlistener(\"ngModelChange\", function CochesComponent_Template_input_ngModelChange_25_listener($event) {\n        return ctx.cocheService.selectedCoche.cv = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(27, \"div\", 8)(28, \"input\", 21, 22);\n      i0.ɵɵlistener(\"ngModelChange\", function CochesComponent_Template_input_ngModelChange_28_listener($event) {\n        return ctx.cocheService.selectedCoche.a_matricula = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(30, \"div\", 8)(31, \"input\", 23, 24);\n      i0.ɵɵlistener(\"ngModelChange\", function CochesComponent_Template_input_ngModelChange_31_listener($event) {\n        return ctx.cocheService.selectedCoche.cantidad = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(33, \"div\", 8)(34, \"input\", 25, 26);\n      i0.ɵɵlistener(\"ngModelChange\", function CochesComponent_Template_input_ngModelChange_34_listener($event) {\n        return ctx.cocheService.selectedCoche.precio = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(36, \"div\", 8)(37, \"select\", 27, 28);\n      i0.ɵɵlistener(\"ngModelChange\", function CochesComponent_Template_select_ngModelChange_37_listener($event) {\n        return ctx.cocheService.selectedCoche.propulsion = $event;\n      });\n      i0.ɵɵelementStart(39, \"option\", 29);\n      i0.ɵɵtext(40, \"Electrico\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(41, \"option\", 30);\n      i0.ɵɵtext(42, \"Diesel\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(43, \"option\", 31);\n      i0.ɵɵtext(44, \"Hibrido\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(45, \"option\", 32);\n      i0.ɵɵtext(46, \"Hidrogeno\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(47, \"div\", 8)(48, \"select\", 33, 28);\n      i0.ɵɵlistener(\"ngModelChange\", function CochesComponent_Template_select_ngModelChange_48_listener($event) {\n        return ctx.cocheService.selectedCoche.carroceria = $event;\n      });\n      i0.ɵɵelementStart(50, \"option\", 34);\n      i0.ɵɵtext(51, \"Sed\\u00E1n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(52, \"option\", 35);\n      i0.ɵɵtext(53, \"Berlina\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(54, \"option\", 36);\n      i0.ɵɵtext(55, \"SUV\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(56, \"option\", 37);\n      i0.ɵɵtext(57, \"Coup\\u00E9\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(58, \"option\", 38);\n      i0.ɵɵtext(59, \"Cabrio\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(60, \"option\", 39);\n      i0.ɵɵtext(61, \"Familiar\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(62, \"option\", 40);\n      i0.ɵɵtext(63, \"Compacto\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(64, \"option\", 41);\n      i0.ɵɵtext(65, \"Monovolumen\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(66, \"option\", 42);\n      i0.ɵɵtext(67, \"Furgoneta\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(68, \"option\", 43);\n      i0.ɵɵtext(69, \"Furgon\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(70, \"option\", 44);\n      i0.ɵɵtext(71, \"Autocaravana\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(72, \"option\", 45);\n      i0.ɵɵtext(73, \"Pick Up\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(74, \"option\", 46);\n      i0.ɵɵtext(75, \"Clasico\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(76, \"option\", 47);\n      i0.ɵɵtext(77, \"Coup\\u00E9\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(78, \"div\", 8)(79, \"select\", 48, 49);\n      i0.ɵɵlistener(\"ngModelChange\", function CochesComponent_Template_select_ngModelChange_79_listener($event) {\n        return ctx.cocheService.selectedCoche.traccion = $event;\n      });\n      i0.ɵɵelementStart(81, \"option\", 50);\n      i0.ɵɵtext(82, \"FWD\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(83, \"option\", 51);\n      i0.ɵɵtext(84, \"RWD\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(85, \"option\", 52);\n      i0.ɵɵtext(86, \"AWD\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(87, \"option\", 53);\n      i0.ɵɵtext(88, \"4WD\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(89, \"option\", 54);\n      i0.ɵɵtext(90, \"4x4\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelement(91, \"input\", 55);\n      i0.ɵɵelementStart(92, \"div\", 56)(93, \"div\", 8)(94, \"button\", 57);\n      i0.ɵɵtext(95, \"Save\");\n      i0.ɵɵelementEnd()()()()()()()();\n      i0.ɵɵelementStart(96, \"div\", 58)(97, \"table\")(98, \"thead\")(99, \"th\");\n      i0.ɵɵtext(100, \"Marca\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(101, \"th\");\n      i0.ɵɵtext(102, \"Modelo\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(103, \"tbody\");\n      i0.ɵɵtemplate(104, CochesComponent_tr_104_Template, 12, 2, \"tr\", 59);\n      i0.ɵɵelementEnd()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"formGroup\", ctx.miFormulario);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngModel\", ctx.cocheService.selectedCoche._id);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngModel\", ctx.cocheService.selectedCoche.marca);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngModel\", ctx.cocheService.selectedCoche.modelo);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngModel\", ctx.cocheService.selectedCoche.color);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngModel\", ctx.cocheService.selectedCoche.etiqueta);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngModel\", ctx.cocheService.selectedCoche.puertas);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngModel\", ctx.cocheService.selectedCoche.cv);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngModel\", ctx.cocheService.selectedCoche.a_matricula);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngModel\", ctx.cocheService.selectedCoche.cantidad);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngModel\", ctx.cocheService.selectedCoche.precio);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngModel\", ctx.cocheService.selectedCoche.propulsion);\n      i0.ɵɵadvance(11);\n      i0.ɵɵproperty(\"ngModel\", ctx.cocheService.selectedCoche.carroceria);\n      i0.ɵɵadvance(31);\n      i0.ɵɵproperty(\"ngModel\", ctx.cocheService.selectedCoche.traccion);\n      i0.ɵɵadvance(25);\n      i0.ɵɵproperty(\"ngForOf\", ctx.cocheService.coches);\n    }\n  },\n  dependencies: [i3.NgForOf, i2.ɵNgNoValidate, i2.NgSelectOption, i2.ɵNgSelectMultipleOption, i2.DefaultValueAccessor, i2.NumberValueAccessor, i2.SelectControlValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.NgModel],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["CocheModule","CocheService","i0","CochesComponent","constructor","cocheService","miFormulario","ngOnInit","console","log","getCoches","addCoche","form","comprobarCoche","selectedCoche","value","_id","putCoche","subscribe","res","resetForm","M","toast","html","postCoche","coches","editCoche","coche","deleteCoche","confirm","reset","carrocerias","propulsiones","tracciones","includes","carroceria","propulsion","traccion","marca","selectors","features","decls","vars","consts","template"],"sourceRoot":"","sources":["/home/pio/Documentos/Documentos_pablo/uni/3_curso/2do.cuatri/ast/practica/mean_curso/angular/src/app/components/coches/coches.component.ts","/home/pio/Documentos/Documentos_pablo/uni/3_curso/2do.cuatri/ast/practica/mean_curso/angular/src/app/components/coches/coches.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { FormControl, FormGroup, NgForm, Validators } from '@angular/forms'; // Necesario para trabajar con formularios\nimport { CocheModule } from 'src/app/models/coche/coche.module';\n\n// Importamos el servicio de coches para que se pueda usar en el modelo de html\nimport { CocheService } from '../../services/coche.service';\n\ndeclare var M: any; // Esto es de materialize para enviar alertas a los usuarios\n\n\n// Decorador de la clase\n@Component({\n  selector: 'app-coches', // Definimos como llamar al componente desde html\n  templateUrl: './coches.component.html', //url a la pagina html del componente\n  styleUrls: ['./coches.component.css'], // url a la pagina de estilos del componente\n  providers: [CocheService]\n})\n\n// Exportamos la clase y la definimos\nexport class CochesComponent {\n\n  // Creeamos el constructor de la clase y iniciamos el servicio de coche.\n  cocheService: CocheService;\n  constructor( cocheService: CocheService, miFormulario: FormGroup){\n    this.cocheService = cocheService;\n  }\n  \n\n  ngOnInit(){\n    console.log(\"iniciado\");\n    \n    this.getCoches();\n\n    // console.log( this.getCoches());\n    \n  }\n\n  // // Definimos la funcion que va a manejar el formulario\n  addCoche(form:NgForm){\n    if (this.comprobarCoche(this.cocheService.selectedCoche)){\n\n      // En caso de que existe el id lo actualizamos\n      if (form.value._id){\n        console.log(\"Editando coche\");\n        this.cocheService.putCoche(form.value)\n          .subscribe(res =>{\n            this.resetForm(form);\n            M.toast({html: \"Edit Succesfully\"});\n            this.getCoches();\n            \n        })\n      } else{\n        // En caso de que no exista el id lo eliminamos\n        console.log(form.value);\n        this.cocheService.postCoche(form.value)\n        \n        // Con subscrive obtenemos la respuesta del servidor.\n          .subscribe(res => {\n            console.log(res)\n            this.resetForm(form); // reseteamos el formulario \n            M.toast({html: 'Save Succesfully'});\n            this.getCoches();\n          })\n      }\n    }\n  }\n\n  getCoches(){\n    this.cocheService.getCoches()\n      .subscribe(res =>{\n        this.cocheService.coches = res as CocheModule[];\n        console.log(res);\n      })\n  }\n\n  \n  editCoche(coche: CocheModule){\n    this.cocheService.selectedCoche = coche;\n  }\n\n  deleteCoche(_id: string){\n    if(confirm(\"¿Estas seguro de que quieres eliminarlo?\")){\n      this.cocheService.deleteCoche(_id)\n      .subscribe(res => {\n        console.log(res);\n        this.getCoches();\n      })\n    }\n  }\n\n  resetForm(form?: NgForm){\n    if (form) {\n      form.reset();\n      this.cocheService.selectedCoche = new CocheModule();\n    }\n  }\n\n  comprobarCoche(coche: CocheModule) {\n    const carrocerias = ['Sedán', 'Berlina', 'SUV', 'Coupé', 'Cabrio', 'Familiar', 'Compacto', 'Monovolumen','Furgoneta','Furgon','Autocaravana', 'Pick Up', 'Clasico', 'Super deportivo'];\n    const propulsiones = ['Electrico', 'Diesel', 'Hibrido', 'Hidrogeno'];\n    const tracciones = ['FWD', 'RWD', 'AWD', '4WD', '4x4'];\n\n    if (carrocerias.includes(coche.carroceria) && propulsiones.includes(coche.propulsion) && tracciones.includes(coche.traccion) && coche.marca != null && coche.marca != \"\") {\n      console.log(\"Parametros bien\");\n      return true;\n    }else{\n      M.toast({html: \"Error faltan valores\"});\n      console.log(\"Faltan datos indispensables\");\n      return false;\n    }\n    \n\n  }\n}\n","<div class=\" container\">\n    <div class=\" row\">\n        <div class=\"col s5\">\n            <div class=\" card \">\n                <div class=\" card-content \">\n                     \n                    <!-- <form #cocheForm=\"ngForm\" (ngSubmit)=\"addCoche(cocheForm)\"> -->\n                    <form [formGroup]=\"miFormulario\">\n                        <div class=\"row\">\n                            <input type=\"hidden\" name=\"_id\" #_id=\"ngModel\" [(ngModel)]=\"cocheService.selectedCoche._id\">\n                            <div class=\"input-field col s12\">\n                                <input type=\"text\" name=\"marca\" #marca=\"ngModel\" [(ngModel)]=\"cocheService.selectedCoche.marca\" placeholder=\"Marca\">\n                            </div>\n                            <div class=\"input-field col s12\">\n                                <input type=\"text\" name=\"modelo\" #modelo=\"ngModel\" [(ngModel)]=\"cocheService.selectedCoche.modelo\" placeholder=\"modelo\">\n                            </div>\n                            <div class=\"input-field col s12\">\n                                <input type=\"text\" name=\"color\" #color=\"ngModel\" [(ngModel)]=\"cocheService.selectedCoche.color\" placeholder=\"color\">\n                            </div>\n                            <div class=\"input-field col s12\">\n                                <input type=\"text\" name=\"etiqueta\" #etiqueta=\"ngModel\" [(ngModel)]=\"cocheService.selectedCoche.etiqueta\" placeholder=\"etiqueta\">\n                            </div>\n                            <div class=\"input-field col s12\">\n                                <input type=\"number\" name=\"puertas\" #puertas=\"ngModel\" [(ngModel)]=\"cocheService.selectedCoche.puertas\" placeholder=\"puertas\">\n                            </div>\n                            <div class=\"input-field col s12\">\n                                <input type=\"number\" name=\"cv\" #cv=\"ngModel\" [(ngModel)]=\"cocheService.selectedCoche.cv\" placeholder=\"cv\">\n                            </div>\n                            <div class=\"input-field col s12\">\n                                <input type=\"date\" name=\"a_matricula\" #a_matricula=\"ngModel\" [(ngModel)]=\"cocheService.selectedCoche.a_matricula\" placeholder=\"a_matricula\">\n                            </div>\n                            <div class=\"input-field col s12\">\n                                <input type=\"number\" name=\"cantidad\" #cantidad=\"ngModel\" [(ngModel)]=\"cocheService.selectedCoche.cantidad\" placeholder=\"cantidad\">\n                            </div>\n                            <div class=\"input-field col s12\">\n                                <input type=\"number\" name=\"precio\" #precio=\"ngModel\" [(ngModel)]=\"cocheService.selectedCoche.precio\" placeholder=\"precio\">\n                            </div>\n\n                            <div class=\"input-field col s12\">\n                                <select class=\"browser-default\"  name=\"propulsion\" #propulsion=\"ngModel\" [(ngModel)]=\"cocheService.selectedCoche.propulsion\" >\n                                    <option value=\"Electrico\">Electrico</option>\n                                    <option value=\"Diesel\">Diesel</option>\n                                    <option value=\"Hibrido\">Hibrido</option>\n                                    <option value=\"Hidrogeno\">Hidrogeno</option>\n                                </select>    \n                                <!-- <label>Propulsion</label> -->\n                            </div>\n\n                           \n                              \n\n                            <div class=\"input-field col s12\">\n                                <!-- <label>Carroceria</label> -->\n                                <select class=\"browser-default\" name=\"carroceria\" #propulsion=\"ngModel\" [(ngModel)]=\"cocheService.selectedCoche.carroceria\">\n                                  <option value=\"Sedán\">Sedán</option>\n                                  <option value=\"Berlina\">Berlina</option>\n                                  <option value=\"SUV\">SUV</option>\n                                  <option value=\"Coupé\">Coupé</option>\n                                  <option value=\"Cabrio\">Cabrio</option>\n                                  <option value=\"Familiar\">Familiar</option>\n                                  <option value=\"Compacto\">Compacto</option>\n                                  <option value=\"Monovolumen\">Monovolumen</option>\n                                  <option value=\"Furgoneta\">Furgoneta</option>\n                                  <option value=\"Furgon\">Furgon</option>\n                                  <option value=\"Autocaravana\">Autocaravana</option>\n                                  <option value=\"Pick Up\">Pick Up</option>\n                                  <option value=\"Clasico\">Clasico</option>\n                                  <option value=\"Super deportivo\">Coupé</option>\n                                  \n                                </select>    \n                            </div>\n\n                            <div class=\"input-field col s12\">\n                                <!-- <label>Tracción</label> -->\n                                <select class=\"browser-default\" name=\"traccion\" #traccion=\"ngModel\" [(ngModel)]=\"cocheService.selectedCoche.traccion\">\n                                  <option value=\"FWD\">FWD</option>\n                                  <option value=\"RWD\">RWD</option>\n                                  <option value=\"AWD\">AWD</option>\n                                  <option value=\"4WD\">4WD</option>\n                                  <option value=\"4x4\">4x4</option>\n                                </select>    \n                            </div>\n                            <input class=\"input-field col s12\" type=\"text\" formControlName=\"nombre\" placeholder=\"Required\">\n                            <div class=\"card-action\">\n                                <div class=\"input-field col s12\">\n                                    <!-- (click)=\"addCoche(cocheForm)\" -->\n                                    <button class=\"btn left\" >Save</button>\n                                    <!-- <button class=\"btn right\"  (click)=\"resetForm(cocheForm)\">Clean</button> -->\n\n                                </div>\n                            </div>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        </div>\n        <div class=\"col s7\">\n            <table>\n                <thead>\n                    <th>Marca</th>\n                    <th>Modelo</th>\n                </thead>\n                <tbody>\n                    <tr *ngFor=\"let coche of cocheService.coches\">\n                        <td> {{coche.marca}} </td>\n                        <td> {{coche.modelo}} </td>\n                        <td>\n                            <a (click)=\"editCoche(coche)\" class=\"btn\">\n                                <i class=\"material-icons\">edit</i>\n                            </a>\n                            <a (click)=\"deleteCoche(coche._id)\" class=\"btn\">\n                                <i class=\"material-icons\">delete</i>\n                            </a>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}